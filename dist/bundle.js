(()=>{"use strict";var t=function(){function t(t,i,a,s){void 0===s&&(s="#FFFFFF"),this.radius=10,this.dx=0,this.dy=0,this.mass=1,this.isPocketed=!1,this.x=t,this.y=i,this.color=s,this.canvas=a.canvas,this.table=a.table}return t.prototype.draw=function(){if(!this.isPocketed){var t=this.canvas.getContext("2d");t&&(t.beginPath(),t.arc(this.x,this.y,this.radius,0,2*Math.PI),t.fillStyle=this.color,t.fill(),t.closePath())}},t.prototype.update=function(){this.isPocketed||(this.x+=this.dx,this.y+=this.dy,this.dx*=.98,this.dy*=.98,Math.abs(this.dx)<.01&&(this.dx=0),Math.abs(this.dy)<.01&&(this.dy=0),(this.x+this.radius>this.canvas.width-this.table.padding||this.x-this.radius<this.table.padding)&&(this.dx=-this.dx,this.x+this.radius>this.canvas.width-this.table.padding&&(this.x=this.canvas.width-this.table.padding-this.radius),this.x-this.radius<this.table.padding&&(this.x=this.table.padding+this.radius)),(this.y+this.radius>this.canvas.height-this.table.padding||this.y-this.radius<this.table.padding)&&(this.dy=-this.dy,this.y+this.radius>this.canvas.height-this.table.padding&&(this.y=this.canvas.height-this.table.padding-this.radius),this.y-this.radius<this.table.padding&&(this.y=this.table.padding+this.radius)),this.draw())},t}();const i=t;var a=function(t,i,a){if(a||2===arguments.length)for(var s,d=0,e=i.length;d<e;d++)!s&&d in i||(s||(s=Array.prototype.slice.call(i,0,d)),s[d]=i[d]);return t.concat(s||Array.prototype.slice.call(i))},s=document.getElementById("gameCanvas"),d=s.getContext("2d"),e=document.getElementById("angle"),h=document.getElementById("force"),n=document.getElementById("strike"),r=new function(t,i,a,s){this.width=t,this.height=i,this.padding=a,this.color=s}(800,400,10,"#006400"),u={canvas:s,table:r},o=[{x:r.padding,y:r.padding,radius:15},{x:s.width/2,y:r.padding,radius:15},{x:s.width-r.padding,y:r.padding,radius:15},{x:r.padding,y:s.height-r.padding,radius:15},{x:s.width/2,y:s.height-r.padding,radius:15},{x:s.width-r.padding,y:s.height-r.padding,radius:15}];function c(t,i){var a=i.x-t.x,s=i.y-t.y;return Math.sqrt(a*a+s*s)<t.radius+i.radius}function l(t,i){var a=t.dx-i.dx,s=t.dy-i.dy;if(a*(i.x-t.x)+s*(i.y-t.y)>=0){var d=-Math.atan2(i.y-t.y,i.x-t.x),e=y({x:t.dx,y:t.dy},d),h=y({x:i.dx,y:i.dy},d),n={x:h.x,y:e.y},r={x:e.x,y:h.y},u=y(n,-d),o=y(r,-d);t.dx=u.x,t.dy=u.y,i.dx=o.x,i.dy=o.y}}function y(t,i){return{x:t.x*Math.cos(i)-t.y*Math.sin(i),y:t.x*Math.sin(i)+t.y*Math.cos(i)}}var x=function(t,a){var s=[],d=25,e=1,h=0;s.push(new i(t,a,u)),e=2,h=12.5,s.push(new i(t+d,a+h,u)),s.push(new i(t+d,a-h,u)),e=3,h=d;for(var n=0;n<e;n++)s.push(new i(t+50,a-h+n*d,u));for(e=4,h=37.5,n=0;n<e;n++)s.push(new i(t+75,a-h+n*d,u));for(e=5,h=50,n=0;n<e;n++)s.push(new i(t+100,a-h+n*d,u));return s}(s.width/2+150,s.height/2),g=new i(s.width/2-250,s.height/2,u,"#FFFFFF");function f(){return a([g],x,!0).every((function(t){return Math.abs(t.dx)<.01&&Math.abs(t.dy)<.01}))}function p(){b(),d.clearRect(0,0,s.width,s.height),d.fillStyle=r.color,d.fillRect(r.padding,r.padding,r.width,r.height),o.forEach((function(t){d.beginPath(),d.arc(t.x,t.y,t.radius,0,2*Math.PI),d.fillStyle="#000000",d.fill(),d.closePath()})),x.forEach((function(t){return t.update()})),g.update();for(var t,i,u,y,p,v=a([g],x,!0),w=0;w<v.length;w++)for(var m=v[w],M=w+1;M<v.length;M++){var P=v[M];c(m,P)&&l(m,P)}a([g],x,!0).forEach((function(t){(function(t){for(var i=0,a=o;i<a.length;i++){var s=a[i],d=t.x-s.x,e=t.y-s.y;if(Math.sqrt(d*d+e*e)<=s.radius)return!0}return!1})(t)&&(t.isPocketed=!0,t===g&&(g.x=s.width/2-250,g.y=s.height/2,g.dx=0,g.dy=0,g.isPocketed=!1))})),x=x.filter((function(t){return!t.isPocketed})),f()?(t=Number(e.value)*Math.PI/180,i=g.x-15*Math.cos(t),u=g.y-15*Math.sin(t),y=i-100*Math.cos(t),p=u-100*Math.sin(t),d.beginPath(),d.moveTo(i,u),d.lineTo(y,p),d.strokeStyle="#8B4513",d.lineWidth=4,d.stroke(),d.closePath(),e.disabled=!1,h.disabled=!1,n.disabled=!1):(e.disabled=!0,h.disabled=!0,n.disabled=!0)}function v(){p(),f()||requestAnimationFrame(v)}function b(){var t=document.getElementById("angleValue");t&&(t.textContent=e.value);var i=document.getElementById("forceValue");i&&(i.textContent=h.value)}n.addEventListener("click",(function(){if(f()){var t=Number(e.value),i=Number(h.value),a=t*Math.PI/180;g.dx=Math.cos(a)*i*.1,g.dy=Math.sin(a)*i*.1,requestAnimationFrame(v)}})),e.addEventListener("input",(function(){f()&&p()})),h.addEventListener("input",(function(){b()})),p()})();