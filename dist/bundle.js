(()=>{"use strict";var t=function(){function t(t,i,e,a){void 0===a&&(a="#FFFFFF"),this.radius=10,this.dx=0,this.dy=0,this.mass=1,this.isPocketed=!1,this.x=t,this.y=i,this.color=a,this.canvas=e.canvas,this.table=e.table}return t.prototype.draw=function(){if(!this.isPocketed){var t=this.canvas.getContext("2d");t&&(t.beginPath(),t.arc(this.x,this.y,this.radius,0,2*Math.PI),t.fillStyle=this.color,t.fill(),t.closePath())}},t.prototype.update=function(){this.isPocketed||(this.x+=this.dx,this.y+=this.dy,this.dx*=.98,this.dy*=.98,Math.abs(this.dx)<.01&&(this.dx=0),Math.abs(this.dy)<.01&&(this.dy=0),(this.x+this.radius>this.table.width+this.table.padding||this.x-this.radius<this.table.padding)&&(this.dx=-this.dx,this.x+this.radius>this.table.width+this.table.padding&&(this.x=this.table.width+this.table.padding-this.radius),this.x-this.radius<this.table.padding&&(this.x=this.table.padding+this.radius)),(this.y+this.radius>this.table.height+this.table.padding||this.y-this.radius<this.table.padding)&&(this.dy=-this.dy,this.y+this.radius>this.table.height+this.table.padding&&(this.y=this.table.height+this.table.padding-this.radius),this.y-this.radius<this.table.padding&&(this.y=this.table.padding+this.radius)),this.draw())},t}();const i=t;function e(t,i){var e=i.x-t.x,a=i.y-t.y;return Math.sqrt(e*e+a*a)<t.radius+i.radius}function a(t,i){var e=t.dx-i.dx,a=t.dy-i.dy;if(e*(i.x-t.x)+a*(i.y-t.y)>=0){var h=-Math.atan2(i.y-t.y,i.x-t.x),s=d({x:t.dx,y:t.dy},h),n=d({x:i.dx,y:i.dy},h),r={x:n.x,y:s.y},o={x:s.x,y:n.y},l=d(r,-h),u=d(o,-h);t.dx=l.x,t.dy=l.y,i.dx=u.x,i.dy=u.y}}function d(t,i){return{x:t.x*Math.cos(i)-t.y*Math.sin(i),y:t.x*Math.sin(i)+t.y*Math.cos(i)}}var h=function(t,i,e){if(e||2===arguments.length)for(var a,d=0,h=i.length;d<h;d++)!a&&d in i||(a||(a=Array.prototype.slice.call(i,0,d)),a[d]=i[d]);return t.concat(a||Array.prototype.slice.call(i))},s=document.getElementById("gameCanvas"),n=s.getContext("2d"),r=document.getElementById("angle"),o=document.getElementById("force"),l=document.getElementById("strike"),u=document.getElementById("hitBallCount");u.textContent="0";var c=new function(t,i,e,a,d){this.width=t,this.height=i,this.padding=e,this.tableColor=a,this.borderColor=d}(800,400,10,"#006400","#654321"),y={canvas:s,table:c},g=[{x:c.padding,y:c.padding,radius:20},{x:c.width/2+c.padding,y:c.padding,radius:20},{x:c.width+c.padding,y:c.padding,radius:20},{x:c.padding,y:c.height+c.padding+2,radius:20},{x:c.width/2+c.padding,y:c.height+c.padding+2,radius:20},{x:c.width+c.padding,y:c.height+c.padding,radius:20}],x=function(t,e){var a=[],d=25,h=1,s=0;a.push(new i(t,e,y)),h=2,s=12.5,a.push(new i(t+d,e+s,y)),a.push(new i(t+d,e-s,y)),h=3,s=d;for(var n=0;n<h;n++)a.push(new i(t+50,e-s+n*d,y));for(h=4,s=37.5,n=0;n<h;n++)a.push(new i(t+75,e-s+n*d,y));for(h=5,s=50,n=0;n<h;n++)a.push(new i(t+100,e-s+n*d,y));return a}(s.width/2+150,s.height/2),f=new i(s.width/2-250,s.height/2,y,"#000");function p(){return h([f],x,!0).every((function(t){return Math.abs(t.dx)<.01&&Math.abs(t.dy)<.01}))}function b(){m(),n.clearRect(0,0,s.width,s.height),n.fillStyle=c.borderColor,n.fillRect(0,0,c.width+2*c.padding,2*c.padding+c.height),n.fillStyle=c.tableColor,n.fillRect(c.padding,c.padding,c.width,c.height),g.forEach((function(t){n.beginPath(),n.arc(t.x,t.y,t.radius,0,2*Math.PI),n.fillStyle="#000",n.fill(),n.closePath()})),x.forEach((function(t){return t.update()})),f.update();for(var t,i,d,y,v,w=h([f],x,!0),M=0;M<w.length;M++)for(var P=w[M],C=M+1;C<w.length;C++){var E=w[C];e(P,E)&&a(P,E)}w.forEach((function(t){t.isPocketed||function(t){for(var i=0,e=g;i<e.length;i++){var a=e[i],d=t.x-a.x,h=t.y-a.y;if(Math.sqrt(d*d+h*h)<=a.radius)return!0}return!1}(t)&&(t.isPocketed=!0,t===f?(f.x=s.width/2-250,f.y=s.height/2,f.dx=0,f.dy=0,f.isPocketed=!1,b()):u.textContent="".concat(Number(u.textContent)+1))})),x=x.filter((function(t){return!t.isPocketed})),p()?(t=Number(r.value)*Math.PI/180,i=f.x-15*Math.cos(t),d=f.y-15*Math.sin(t),y=i-100*Math.cos(t),v=d-100*Math.sin(t),n.beginPath(),n.moveTo(i,d),n.lineTo(y,v),n.strokeStyle="#8B4513",n.lineWidth=4,n.stroke(),n.closePath(),r.disabled=!1,o.disabled=!1,l.disabled=!1):(r.disabled=!0,o.disabled=!0,l.disabled=!0)}function v(){b(),p()||requestAnimationFrame(v)}function m(){var t=document.getElementById("angleValue");t&&(t.textContent=r.value);var i=document.getElementById("forceValue");i&&(i.textContent=o.value)}l.addEventListener("click",(function(){if(p()){var t=Number(r.value),i=Number(o.value),e=t*Math.PI/180;f.dx=Math.cos(e)*i*.25,f.dy=Math.sin(e)*i*.25,requestAnimationFrame(v)}})),r.addEventListener("input",(function(){p()&&b()})),o.addEventListener("input",(function(){m()})),b()})();
//# sourceMappingURL=bundle.js.map