(()=>{"use strict";var t=function(){function t(t,i,e){void 0===e&&(e="#FFFFFF"),this.radius=10,this.dx=0,this.dy=0,this.isPocketed=!1,this.point=t,this.color=e,this.canvas=i.canvas,this.table=i.table}return t.prototype.draw=function(){if(!this.isPocketed){var t=this.canvas.getContext("2d");t&&(t.beginPath(),t.arc(this.x,this.y,this.radius,0,2*Math.PI),t.fillStyle=this.color,t.fill(),t.closePath())}},t.prototype.update=function(){this.isPocketed||(this.x+=this.dx,this.y+=this.dy,this.dx*=.98,this.dy*=.98,Math.abs(this.dx)<.01&&(this.dx=0),Math.abs(this.dy)<.01&&(this.dy=0),(this.x+this.radius>this.table.width+this.table.padding||this.x-this.radius<this.table.padding)&&(this.dx=-this.dx,this.x+this.radius>this.table.width+this.table.padding&&(this.x=this.table.width+this.table.padding-this.radius),this.x-this.radius<this.table.padding&&(this.x=this.table.padding+this.radius)),(this.y+this.radius>this.table.height+this.table.padding||this.y-this.radius<this.table.padding)&&(this.dy=-this.dy,this.y+this.radius>this.table.height+this.table.padding&&(this.y=this.table.height+this.table.padding-this.radius),this.y-this.radius<this.table.padding&&(this.y=this.table.padding+this.radius)),this.draw())},Object.defineProperty(t.prototype,"x",{get:function(){return this.point.x},set:function(t){this.point.x=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this.point.y},set:function(t){this.point.y=t},enumerable:!1,configurable:!0}),t}();const i=t;var e=function(){function t(t){this.radius=20,this.point=t}return Object.defineProperty(t.prototype,"x",{get:function(){return this.point.x},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this.point.y},enumerable:!1,configurable:!0}),t}();const n=e,a=function(t,i){this.x=t,this.y=i},d=function(t,i,e,n,a){this.width=t,this.height=i,this.padding=e,this.tableColor=n,this.borderColor=a};function h(t,i){var e=i.x-t.x,n=i.y-t.y;return Math.sqrt(e*e+n*n)<t.radius+i.radius}function s(t,i){return{x:t.x*Math.cos(i)-t.y*Math.sin(i),y:t.x*Math.sin(i)+t.y*Math.cos(i)}}function r(t,i){var e=t.dx-i.dx,n=t.dy-i.dy;if(e*(i.x-t.x)+n*(i.y-t.y)>=0){var a=-Math.atan2(i.y-t.y,i.x-t.x),d=s({x:t.dx,y:t.dy},a),h=s({x:i.dx,y:i.dy},a),r={x:h.x,y:d.y},o={x:d.x,y:h.y},u=s(r,-a),l=s(o,-a);t.dx=u.x,t.dy=u.y,i.dx=l.x,i.dy=l.y}}var o=function(){var t=document.getElementById("angle"),i=document.getElementById("force"),e=document.getElementById("angleValue");e&&(e.textContent=t.value);var n=document.getElementById("forceValue");n&&(n.textContent=i.value)},u=function(t,i,e){if(e||2===arguments.length)for(var n,a=0,d=i.length;a<d;a++)!n&&a in i||(n||(n=Array.prototype.slice.call(i,0,a)),n[a]=i[a]);return t.concat(n||Array.prototype.slice.call(i))};var l,c,y,g,p,f,x,b,w,v,m,M,P;l=document.getElementById("gameCanvas"),c=document.getElementById("angle"),y=document.getElementById("force"),g=document.getElementById("strike"),p=new d(800,400,10,"#006400","#654321"),f=l.getContext("2d"),x={canvas:l,table:p},b=function(t,e,n){var d=[],h=25,s=0;d.push(new i(new a(t,e),n)),s=12.5,d.push(new i(new a(t+h,e+s),n)),d.push(new i(new a(t+h,e-s),n));var r=3;s=h;for(var o=0;o<r;o++)d.push(new i(new a(t+50,e-s+o*h),n));for(r=4,s=37.5,o=0;o<r;o++)d.push(new i(new a(t+75,e-s+o*h),n));for(r=5,s=50,o=0;o<r;o++)d.push(new i(new a(t+100,e-s+o*h),n));return d}(l.width/2+150,l.height/2,x),w=new i(new a(l.width/2-250,l.height/2),x,"#000"),v=[new n(new a(p.padding,p.padding)),new n(new a(p.width/2+p.padding,p.padding)),new n(new a(p.width+p.padding,p.padding)),new n(new a(p.padding,p.height+p.padding)),new n(new a(p.width/2+p.padding,p.height+p.padding)),new n(new a(p.width+p.padding,p.height+p.padding))],m=function(){return u([w],b,!0).every((function(t){return Math.abs(t.dx)<.01&&Math.abs(t.dy)<.01}))},M=function(){o(),f.clearRect(0,0,l.width,l.height),f.fillStyle=p.borderColor,f.fillRect(0,0,p.width+2*p.padding,2*p.padding+p.height),f.fillStyle=p.tableColor,f.fillRect(p.padding,p.padding,p.width,p.height),v.forEach((function(t){f.beginPath(),f.arc(t.x,t.y,t.radius,0,2*Math.PI),f.fillStyle="#000",f.fill(),f.closePath()})),b.forEach((function(t){return t.update()})),w.update();for(var t,i,e,n,a,d=u([w],b,!0),s=0;s<d.length;s++)for(var x=d[s],P=s+1;P<d.length;P++){var E=d[P];h(x,E)&&r(x,E)}d.forEach((function(t){var i;t.isPocketed||function(t){for(var i=0,e=v;i<e.length;i++){var n=e[i],a=t.x-n.x,d=t.y-n.y;if(Math.sqrt(a*a+d*d)<=n.radius)return!0}return!1}(t)&&(t.isPocketed=!0,t===w?(w.x=l.width/2-250,w.y=l.height/2,w.dx=0,w.dy=0,w.isPocketed=!1,M()):(i=document.getElementById("hitBallCount")).textContent="".concat(Number(i.textContent)+1))})),b=b.filter((function(t){return!t.isPocketed})),b.length||(c.disabled=!0,y.disabled=!0,g.disabled=!0),m()?(t=Number(c.value)*Math.PI/180,i=w.x-15*Math.cos(t),e=w.y-15*Math.sin(t),n=i-100*Math.cos(t),a=e-100*Math.sin(t),f.beginPath(),f.moveTo(i,e),f.lineTo(n,a),f.strokeStyle="#8B4513",f.lineWidth=4,f.stroke(),f.closePath(),c.disabled=!1,y.disabled=!1,g.disabled=!1):(c.disabled=!0,y.disabled=!0,g.disabled=!0)},P=function(){M(),m()||requestAnimationFrame(P)},g.addEventListener("click",(function(){if(m()){var t=Number(c.value),i=Number(y.value),e=t*Math.PI/180;w.dx=Math.cos(e)*i*.25,w.dy=Math.sin(e)*i*.25,requestAnimationFrame(P)}})),c.addEventListener("input",(function(){m()&&M()})),y.addEventListener("input",(function(){o()})),M()})();
//# sourceMappingURL=bundle.js.map