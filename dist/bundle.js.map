{"version":3,"file":"bundle.js","mappings":"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","sources":["webpack://billiard/./src/entities/ball.ts","webpack://billiard/./src/entities/hole.ts","webpack://billiard/./src/entities/point.ts","webpack://billiard/./src/entities/table.ts","webpack://billiard/./src/physics/collision.ts","webpack://billiard/./src/game/displayInfo.ts","webpack://billiard/./src/game/index.ts","webpack://billiard/./src/index.ts"],"sourcesContent":["import { IBilliardWorld } from \"../game\";\nimport Point from \"./point\";\nimport Table from \"./table\";\n\nexport const EPSILON = 0.01\n\nconst SPEED_DRAIN = 0.98;\n\nclass Ball {\n  point: Point;\n  radius: number = 10;\n  dx: number = 0;\n  dy: number = 0;\n  color: string;\n  isPocketed: boolean = false;\n  canvas: HTMLCanvasElement;\n  table: Table;\n  constructor(\n    point: Point,\n    world: IBilliardWorld,\n    color: string = \"#FFFFFF\"\n  ) {\n    this.point = point;\n    this.color = color;\n    this.canvas = world.canvas;\n    this.table = world.table;\n  }\n\n  draw() {\n    if (this.isPocketed) return;\n\n    const ctx = this.canvas.getContext(\"2d\");\n    if (ctx) {\n      ctx.beginPath();\n      ctx.arc(this.x, this.y, this.radius, 0, Math.PI * 2);\n      ctx.fillStyle = this.color;\n      ctx.fill();\n      ctx.closePath();\n    }\n  }\n\n  update() {\n    if (this.isPocketed) return;\n\n    this.x += this.dx;\n    this.y += this.dy;\n\n    this.dx *= SPEED_DRAIN;\n    this.dy *= SPEED_DRAIN;\n\n    if (Math.abs(this.dx) < EPSILON) this.dx = 0;\n    if (Math.abs(this.dy) < EPSILON) this.dy = 0;\n\n    if (\n      this.x + this.radius > this.table.width + this.table.padding ||\n      this.x - this.radius < this.table.padding\n    ) {\n      this.dx = -this.dx;\n\n      if (this.x + this.radius > this.table.width + this.table.padding)\n        this.x = this.table.width + this.table.padding - this.radius;\n      if (this.x - this.radius < this.table.padding)\n        this.x = this.table.padding + this.radius;\n    }\n    if (\n      this.y + this.radius > this.table.height + this.table.padding ||\n      this.y - this.radius < this.table.padding\n    ) {\n      this.dy = -this.dy;\n\n      if (this.y + this.radius > this.table.height + this.table.padding)\n        this.y = this.table.height + this.table.padding - this.radius;\n      if (this.y - this.radius < this.table.padding)\n        this.y = this.table.padding + this.radius;\n    }\n\n    this.draw();\n  }\n\n  get x() {\n    return this.point.x;\n  }\n\n  set x(newX: number) {\n    this.point.x = newX\n  }\n\n  get y() {\n    return this.point.y;\n  }\n\n  set y(newY: number) {\n    this.point.y = newY\n  }\n}\n\nexport default Ball;\n","import type Point from \"./point\";\n\nconst HOLE_RADIUS = 20;\n\nclass Hole {\n  point: Point;\n  radius = HOLE_RADIUS;\n  constructor(point: Point) {\n    this.point = point;\n  }\n\n  get x() {\n    return this.point.x;\n  }\n  get y() {\n    return this.point.y;\n  }\n}\n\nexport default Hole;\n","class Point {\n    x: number;\n    y: number;\n    constructor(x: number, y: number) {\n        this.x = x;\n        this.y = y;\n    }\n}\n\nexport default Point;","class Table {\n  width: number;\n  height: number;\n  padding: number;\n  tableColor: string;\n  borderColor: string;\n  constructor(\n    width: number,\n    height: number,\n    padding: number,\n    tableColor: string,\n    borderColor: string\n  ) {\n    this.width = width;\n    this.height = height;\n    this.padding = padding;\n    this.tableColor = tableColor;\n    this.borderColor = borderColor;\n  }\n}\n\nexport default Table;\n","import Ball from \"../entities/ball\";\n\nfunction rotate(velocity: { x: number; y: number }, angle: number) {\n  return {\n    x: velocity.x * Math.cos(angle) - velocity.y * Math.sin(angle),\n    y: velocity.x * Math.sin(angle) + velocity.y * Math.cos(angle),\n  };\n}\n\nfunction isColliding(ball1: Ball, ball2: Ball) {\n  const dx = ball2.x - ball1.x;\n  const dy = ball2.y - ball1.y;\n  const distance = Math.sqrt(dx * dx + dy * dy);\n  return distance < ball1.radius + ball2.radius;\n}\n\nfunction resolveCollision(ball1: Ball, ball2: Ball) {\n  const xVelocityDiff = ball1.dx - ball2.dx;\n  const yVelocityDiff = ball1.dy - ball2.dy;\n\n  const xDistance = ball2.x - ball1.x;\n  const yDistacne = ball2.y - ball1.y;\n\n  if (xVelocityDiff * xDistance + yVelocityDiff * yDistacne >= 0) {\n    const angle = -Math.atan2(ball2.y - ball1.y, ball2.x - ball1.x);\n\n    const rotatedVelocityBall1 = rotate({ x: ball1.dx, y: ball1.dy }, angle);\n    const rotatedVelocityBall2 = rotate({ x: ball2.dx, y: ball2.dy }, angle);\n\n    const v1 = { x: rotatedVelocityBall2.x, y: rotatedVelocityBall1.y };\n    const v2 = { x: rotatedVelocityBall1.x, y: rotatedVelocityBall2.y };\n\n    const originCoordBall1 = rotate(v1, -angle);\n    const originCoordBall2 = rotate(v2, -angle);\n\n    ball1.dx = originCoordBall1.x;\n    ball1.dy = originCoordBall1.y;\n    ball2.dx = originCoordBall2.x;\n    ball2.dy = originCoordBall2.y;\n  }\n}\n\nexport { resolveCollision, isColliding };\n","\nconst displayInputValues = () => {\n  const angleInput = document.getElementById(\"angle\") as HTMLInputElement;\n  const forceInput = document.getElementById(\"force\") as HTMLInputElement;\n\n  const angleValueNode = document.getElementById(\"angleValue\");\n  if (angleValueNode) {\n    angleValueNode.textContent = angleInput.value;\n  }\n\n  const forceValueNode = document.getElementById(\"forceValue\");\n  if (forceValueNode) {\n    forceValueNode.textContent = forceInput.value;\n  }\n};\n\nconst increaseHitballCount  = () => {\n  const hitBallCount = document.getElementById(\n    \"hitBallCount\"\n  ) as HTMLDivElement;\n\n  hitBallCount.textContent = `${Number(hitBallCount.textContent) + 1}`;\n\n};\n\nexport { displayInputValues, increaseHitballCount };\n","import Ball, { EPSILON } from \"../entities/ball\";\nimport Hole from \"../entities/hole\";\nimport Point from \"../entities/point\";\nimport Table from \"../entities/table\";\nimport { isColliding, resolveCollision } from \"../physics/collision\";\nimport { displayInputValues, increaseHitballCount } from \"./displayInfo\";\n\nexport type IStartGame = (\n  canvas: HTMLCanvasElement,\n  angleInput: HTMLInputElement,\n  forceInput: HTMLInputElement,\n  strikeButton: HTMLButtonElement\n) => void;\n\nexport type ICreateInitialBalls = (\n  startX: number,\n  startY: number,\n  world: IBilliardWorld\n) => Ball[];\n\nexport type IBilliardWorld = {\n  canvas: HTMLCanvasElement;\n  table: Table;\n};\n\nconst INITIAL_BALL_TRIANGLE_OFFSET = 150;\nconst INITIAL_CUE_BALL_OFFSET = 250;\n\nconst CUE_OFFSET = 15;\nconst CUE_LENGTH = 100;\n\nconst FORCE_MULTIPLIER = 0.25;\n\nconst createInitialBalls: ICreateInitialBalls = (\n  startX: number,\n  startY: number,\n  world: IBilliardWorld\n) => {\n  const balls: Ball[] = [];\n  const spacing = 2 * 10 + 5;\n\n  let offsetY = 0;\n\n  balls.push(new Ball(new Point(startX, startY), world));\n\n  offsetY = spacing / 2;\n  balls.push(new Ball(new Point(startX + spacing, startY + offsetY), world));\n  balls.push(new Ball(new Point(startX + spacing, startY - offsetY), world));\n\n  let rowNum = 3;\n  offsetY = spacing;\n  for (let i = 0; i < rowNum; i++) {\n    balls.push(\n      new Ball(\n        new Point(startX + 2 * spacing, startY - offsetY + i * spacing),\n        world\n      )\n    );\n  }\n\n  rowNum = 4;\n  offsetY = spacing * 1.5;\n  for (let i = 0; i < rowNum; i++) {\n    balls.push(\n      new Ball(\n        new Point(startX + 3 * spacing, startY - offsetY + i * spacing),\n        world\n      )\n    );\n  }\n\n  rowNum = 5;\n  offsetY = spacing * 2;\n  for (let i = 0; i < rowNum; i++) {\n    balls.push(\n      new Ball(\n        new Point(startX + 4 * spacing, startY - offsetY + i * spacing),\n        world\n      )\n    );\n  }\n\n  return balls;\n};\n\nconst startGame: IStartGame = (\n  canvas,\n  angleInput,\n  forceInput,\n  strikeButton\n) => {\n  const table = new Table(800, 400, 10, \"#006400\", \"#654321\");\n  const ctx = canvas.getContext(\"2d\") as CanvasRenderingContext2D;\n  const world: IBilliardWorld = { canvas, table };\n\n  let balls: Ball[] = createInitialBalls(\n    canvas.width / 2 + INITIAL_BALL_TRIANGLE_OFFSET,\n    canvas.height / 2,\n    world\n  );\n\n  const cueBall = new Ball(\n    new Point(canvas.width / 2 - INITIAL_CUE_BALL_OFFSET, canvas.height / 2),\n    world,\n    \"#000\"\n  );\n\n  const holes = [\n    new Hole(new Point(table.padding, table.padding)),\n    new Hole(new Point(table.width / 2 + table.padding, table.padding)),\n    new Hole(new Point(table.width + table.padding, table.padding)),\n    new Hole(new Point(table.padding, table.height + table.padding)),\n    new Hole(\n      new Point(table.width / 2 + table.padding, table.height + table.padding)\n    ),\n    new Hole(\n      new Point(table.width + table.padding, table.height + table.padding)\n    ),\n  ];\n\n  const areAllBallsStopped = () => {\n    return [cueBall, ...balls].every(\n      (ball) => Math.abs(ball.dx) < EPSILON && Math.abs(ball.dy) < EPSILON\n    );\n  };\n\n  const updateGameState = () => {\n    function drawBilliardTable() {\n      ctx.fillStyle = table.borderColor;\n      ctx.fillRect(\n        0,\n        0,\n        table.width + table.padding * 2,\n        table.padding * 2 + table.height\n      );\n      ctx.fillStyle = table.tableColor;\n      ctx.fillRect(table.padding, table.padding, table.width, table.height);\n    }\n\n    function drawHoles() {\n      holes.forEach((hole) => {\n        ctx.beginPath();\n        ctx.arc(hole.x, hole.y, hole.radius, 0, Math.PI * 2);\n        ctx.fillStyle = \"#000\";\n        ctx.fill();\n        ctx.closePath();\n      });\n    }\n\n    function isBallInHole(ball: Ball) {\n      for (const hole of holes) {\n        const dx = ball.x - hole.x;\n        const dy = ball.y - hole.y;\n        const distance = Math.sqrt(dx * dx + dy * dy);\n        if (distance <= hole.radius) {\n          return true;\n        }\n      }\n      return false;\n    }\n\n    function drawCueStick() {\n      const angle = Number(angleInput.value);\n      const radians = (angle * Math.PI) / 180;\n\n      const cueStartX = cueBall.x - Math.cos(radians) * CUE_OFFSET;\n      const cueStartY = cueBall.y - Math.sin(radians) * CUE_OFFSET;\n\n      const cueEndX = cueStartX - Math.cos(radians) * CUE_LENGTH;\n      const cueEndY = cueStartY - Math.sin(radians) * CUE_LENGTH;\n\n      ctx.beginPath();\n      ctx.moveTo(cueStartX, cueStartY);\n      ctx.lineTo(cueEndX, cueEndY);\n      ctx.strokeStyle = \"#8B4513\";\n      ctx.lineWidth = 4;\n      ctx.stroke();\n      ctx.closePath();\n    }\n\n    function resetCueBall() {\n      cueBall.x = canvas.width / 2 - INITIAL_CUE_BALL_OFFSET;\n      cueBall.y = canvas.height / 2;\n      cueBall.dx = 0;\n      cueBall.dy = 0;\n      cueBall.isPocketed = false;\n      updateGameState();\n    }\n\n    displayInputValues();\n    ctx.clearRect(0, 0, canvas.width, canvas.height);\n    drawBilliardTable();\n    drawHoles();\n    balls.forEach((ball) => ball.update());\n    cueBall.update();\n\n    const allBalls = [cueBall, ...balls];\n    for (let i = 0; i < allBalls.length; i++) {\n      const ballToCollide = allBalls[i];\n      for (let j = i + 1; j < allBalls.length; j++) {\n        const ball2 = allBalls[j];\n        if (isColliding(ballToCollide, ball2)) {\n          resolveCollision(ballToCollide, ball2);\n        }\n      }\n    }\n\n    allBalls.forEach((ball) => {\n      if (ball.isPocketed) {\n        return;\n      }\n      if (isBallInHole(ball)) {\n        ball.isPocketed = true;\n        if (ball === cueBall) {\n          resetCueBall();\n        } else {\n          increaseHitballCount();\n        }\n      }\n    });\n\n    balls = balls.filter((ball) => !ball.isPocketed);\n\n    if (areAllBallsStopped() && balls.length) {\n      drawCueStick();\n      angleInput.disabled = false;\n      forceInput.disabled = false;\n      strikeButton.disabled = false;\n    } else {\n      angleInput.disabled = true;\n      forceInput.disabled = true;\n      strikeButton.disabled = true;\n    }\n  };\n\n  const gameLoop = () => {\n    updateGameState();\n\n    if (!areAllBallsStopped()) {\n      requestAnimationFrame(gameLoop);\n    }\n  };\n\n  const strikeBall = () => {\n    if (!areAllBallsStopped()) return;\n\n    const angle = Number(angleInput.value);\n    const force = Number(forceInput.value);\n    const radians = (angle * Math.PI) / 180;\n\n    cueBall.dx = Math.cos(radians) * force * FORCE_MULTIPLIER;\n    cueBall.dy = Math.sin(radians) * force * FORCE_MULTIPLIER;\n\n    requestAnimationFrame(gameLoop);\n  };\n\n  strikeButton.addEventListener(\"click\", strikeBall);\n\n  angleInput.addEventListener(\"input\", () => {\n    if (areAllBallsStopped()) updateGameState();\n  });\n\n  forceInput.addEventListener(\"input\", () => {\n    displayInputValues();\n  });\n\n  updateGameState();\n};\n\nexport default startGame;\n","import startGame from \"./game\";\n\nconst canvas = document.getElementById(\"gameCanvas\") as HTMLCanvasElement;\n\nconst angleInput = document.getElementById(\"angle\") as HTMLInputElement;\nconst forceInput = document.getElementById(\"force\") as HTMLInputElement;\nconst strikeButton = document.getElementById(\"strike\") as HTMLButtonElement;\n\nstartGame(canvas, angleInput, forceInput, strikeButton)\n\n\ndocument.getElementById('restart').addEventListener('click', () => {\n    location.reload();\n})"],"names":["EPSILON","point","world","color","radius","dx","dy","isPocketed","this","canvas","table","draw","ctx","getContext","beginPath","arc","x","y","Math","PI","fillStyle","fill","closePath","update","abs","width","padding","height","newX","newY","tableColor","borderColor","rotate","velocity","angle","cos","sin","isColliding","ball1","ball2","sqrt","resolveCollision","xVelocityDiff","yVelocityDiff","atan2","rotatedVelocityBall1","rotatedVelocityBall2","v1","v2","originCoordBall1","originCoordBall2","displayInputValues","angleInput","document","getElementById","forceInput","angleValueNode","textContent","value","forceValueNode","strikeButton","balls","cueBall","holes","areAllBallsStopped","updateGameState","gameLoop","startX","startY","spacing","offsetY","push","rowNum","i","createInitialBalls","every","ball","clearRect","fillRect","forEach","hole","radians","cueStartX","cueStartY","cueEndX","cueEndY","allBalls","length","ballToCollide","j","hitBallCount","isBallInHole","Number","filter","moveTo","lineTo","strokeStyle","lineWidth","stroke","disabled","requestAnimationFrame","addEventListener","force","location","reload"],"sourceRoot":""}